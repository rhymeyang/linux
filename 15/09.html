<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Section 15.9 Public Key Authentication | Linux Pro</title><meta name="description" content="some description">
    <link rel="preload" href="/linux/assets/style-DY6JTdq5.css" as="style"><link rel="stylesheet" href="/linux/assets/style-DY6JTdq5.css">
    <link rel="modulepreload" href="/linux/assets/app-D-CuBheB.js"><link rel="modulepreload" href="/linux/assets/09.html-g7VUDRH6.js">
    <link rel="prefetch" href="/linux/assets/index.html--hWB_ATi.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-Dz01UT4i.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-BjAvmRsl.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-ww-lpVJn.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-Cd-ZoDC0.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-CJPYwBBj.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-BJB344lo.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-BbwOlZq_.js" as="script"><link rel="prefetch" href="/linux/assets/05.html-ACLp6KiH.js" as="script"><link rel="prefetch" href="/linux/assets/06.html-CwyzCaZx.js" as="script"><link rel="prefetch" href="/linux/assets/07.html-0d75F1qr.js" as="script"><link rel="prefetch" href="/linux/assets/08.html-ByPQG-m9.js" as="script"><link rel="prefetch" href="/linux/assets/09.html-BoAZnh-J.js" as="script"><link rel="prefetch" href="/linux/assets/10.html-A3ZWErsC.js" as="script"><link rel="prefetch" href="/linux/assets/11.html-BE5KdOhJ.js" as="script"><link rel="prefetch" href="/linux/assets/12.html-C0aZ1q4f.js" as="script"><link rel="prefetch" href="/linux/assets/13.html-CV4sH6Sg.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-Dwb1_Q6W.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-B4fnEs9_.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-CZIAunEe.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-DwccYv6N.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-D1zLjfCj.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-CSdR0WIK.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-DptRvqIe.js" as="script"><link rel="prefetch" href="/linux/assets/05.html-Dsh7fsdo.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-D_NGpEqg.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-Dk_ogPfG.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-B0U6Q3HK.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-BXim3AVp.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-C6bPNZdV.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-D_VnBwFv.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-BwnANWd8.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-CstyCFM3.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-Jrkn32wh.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-DluyVuvs.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-B8FVDG_i.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-BdSlSIUI.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-xyAe8AIL.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-D8_ZMBWh.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-C7Wra94I.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-C3lEqUOr.js" as="script"><link rel="prefetch" href="/linux/assets/05.html-F-FQz5R6.js" as="script"><link rel="prefetch" href="/linux/assets/06.html-Dz1DGMZM.js" as="script"><link rel="prefetch" href="/linux/assets/07.html-znsQji-y.js" as="script"><link rel="prefetch" href="/linux/assets/08.html-CBLjL1ZI.js" as="script"><link rel="prefetch" href="/linux/assets/09.html-jIzwh2os.js" as="script"><link rel="prefetch" href="/linux/assets/10.html-C_lt7LgD.js" as="script"><link rel="prefetch" href="/linux/assets/11.html-TTklBJZE.js" as="script"><link rel="prefetch" href="/linux/assets/12.html-ZiptgeiF.js" as="script"><link rel="prefetch" href="/linux/assets/13.html-Dz4CIcSG.js" as="script"><link rel="prefetch" href="/linux/assets/14.html-BTR2P_Bw.js" as="script"><link rel="prefetch" href="/linux/assets/15.html-BlTL_y7B.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-DuqQQk9k.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-CBkLTonc.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-dm-r8_En.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-BbRxonLI.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-CSivpnqs.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-Bn_HQE-j.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-pY-zih6t.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-BlXXkeVg.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-2I8SNFK0.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-DEDdnt4Y.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-OLisIOqI.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-TC75vzFm.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-DmtQ657Z.js" as="script"><link rel="prefetch" href="/linux/assets/05.html-VGnhee2L.js" as="script"><link rel="prefetch" href="/linux/assets/06.html-BxKUko7V.js" as="script"><link rel="prefetch" href="/linux/assets/07.html-DEAYVxVe.js" as="script"><link rel="prefetch" href="/linux/assets/08.html-iqlWilCE.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-BXnSne_t.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-C5ZHAnTi.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-CZyUXXDs.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-DOqYPXmL.js" as="script"><link rel="prefetch" href="/linux/assets/05.html-Dx1hnvzP.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-BC5RRv5R.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-CfaR1348.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-BGornJef.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-TmnySKlq.js" as="script"><link rel="prefetch" href="/linux/assets/05.html-C13LcQMi.js" as="script"><link rel="prefetch" href="/linux/assets/01.html-DhirAxoS.js" as="script"><link rel="prefetch" href="/linux/assets/02.html-iSHcsvSQ.js" as="script"><link rel="prefetch" href="/linux/assets/03.html-CVWG75lM.js" as="script"><link rel="prefetch" href="/linux/assets/04.html-D9u55XMs.js" as="script"><link rel="prefetch" href="/linux/assets/05.html-0OZAUS22.js" as="script"><link rel="prefetch" href="/linux/assets/06.html-BVB3CDy8.js" as="script"><link rel="prefetch" href="/linux/assets/07.html-DeJXuI-v.js" as="script"><link rel="prefetch" href="/linux/assets/08.html-ByMHEKHr.js" as="script"><link rel="prefetch" href="/linux/assets/10.html-oNY_784G.js" as="script"><link rel="prefetch" href="/linux/assets/11.html-B0td1Voi.js" as="script"><link rel="prefetch" href="/linux/assets/12.html-UT4Yk5O4.js" as="script"><link rel="prefetch" href="/linux/assets/13.html-eL8MUJ6b.js" as="script"><link rel="prefetch" href="/linux/assets/14.html-BvZil1oN.js" as="script"><link rel="prefetch" href="/linux/assets/temp.html-BDKWHNuS.js" as="script"><link rel="prefetch" href="/linux/assets/404.html-CxeNL8BR.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/linux/"><img class="vp-site-logo" src="/linux/images/leaf.svg" alt="Linux Pro"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Linux Pro</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../linux/" aria-label="Linux Pro"><!---->Linux Pro<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../security_pro/" aria-label="Security Pro"><!---->Security Pro<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../tools/" aria-label="Tools"><!---->Tools<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../english-starter/" aria-label="English"><!---->English<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../Se/" aria-label="Semester 3"><!---->Semester 3<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../linux/" aria-label="Linux Pro"><!---->Linux Pro<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../security_pro/" aria-label="Security Pro"><!---->Security Pro<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../tools/" aria-label="Tools"><!---->Tools<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../english-starter/" aria-label="English"><!---->English<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/linux/../Se/" aria-label="Semester 3"><!---->Semester 3<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Info <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/" aria-label="Linux Pro"><!---->Linux Pro<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">0.0 Linux Pro Introduction <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/00/01.html" aria-label="Section 0.1 Course Introduction"><!---->Section 0.1 Course Introduction<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/00/02.html" aria-label="Section 0.2 The TestOut Lab Simulator"><!---->Section 0.2 The TestOut Lab Simulator<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">1.0 Linux Overview <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/01/01.html" aria-label="Section 1.1 Linux Introduction"><!---->Section 1.1 Linux Introduction<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">2.0 Using Linux <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/01.html" aria-label="Section 2.1 The Linux Shell"><!---->Section 2.1 The Linux Shell<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/02.html" aria-label="Section 2.2 Linux Help"><!---->Section 2.2 Linux Help<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/03.html" aria-label="Section 2.3 Text Editors"><!---->Section 2.3 Text Editors<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/04.html" aria-label="Section 2.4 Aliases"><!---->Section 2.4 Aliases<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/05.html" aria-label="Section 2.5 Environment Variables"><!---->Section 2.5 Environment Variables<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/06.html" aria-label="Section 2.6 Shell Configuration Files"><!---->Section 2.6 Shell Configuration Files<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/07.html" aria-label="Section 2.7 Redirection, Piping and Command Substitution"><!---->Section 2.7 Redirection, Piping and Command Substitution<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/08.html" aria-label="Section 2.8 Directories"><!---->Section 2.8 Directories<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/09.html" aria-label="Section 2.9 Files"><!---->Section 2.9 Files<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/10.html" aria-label="Section 2.10 Links"><!---->Section 2.10 Links<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/11.html" aria-label="Section 2.11 Filesystem Hierarchy Standard (FHS)"><!---->Section 2.11 Filesystem Hierarchy Standard (FHS)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/12.html" aria-label="Section 2.12 Locating and Searching Files"><!---->Section 2.12 Locating and Searching Files<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/02/13.html" aria-label="Section 2.13 Text Stream Processing"><!---->Section 2.13 Text Stream Processing<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">3.0 Installation and Localization <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/03/01.html" aria-label="Section 3.1 Linux System Design"><!---->Section 3.1 Linux System Design<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/03/02.html" aria-label="Section 3.2 Linux Installation"><!---->Section 3.2 Linux Installation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/03/03.html" aria-label="Section 3.3 Localization"><!---->Section 3.3 Localization<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">4.0 Boot and Shutdown <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/04/01.html" aria-label="Section 4.1 Linux Boot Process"><!---->Section 4.1 Linux Boot Process<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/04/02.html" aria-label="Section 4.2 Bootloaders"><!---->Section 4.2 Bootloaders<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/04/03.html" aria-label="Section 4.3 systemd Boot Targets"><!---->Section 4.3 systemd Boot Targets<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/04/04.html" aria-label="Section 4.4 System Services"><!---->Section 4.4 System Services<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/04/05.html" aria-label="Section 4.5 System Shutdown"><!---->Section 4.5 System Shutdown<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">5.0 Graphical User Interfaces and Desktops <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/05/01.html" aria-label="Section 5.1 Graphical User Interfaces"><!---->Section 5.1 Graphical User Interfaces<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/05/02.html" aria-label="Section 5.2 Linux Desktops"><!---->Section 5.2 Linux Desktops<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/05/03.html" aria-label="Section 5.3 Remote Desktop"><!---->Section 5.3 Remote Desktop<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/05/04.html" aria-label="Section 5.4 Accessibility"><!---->Section 5.4 Accessibility<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">6.0 Software Installation <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/06/01.html" aria-label="Section 6.1 Red Hat Package Manager (RPM)"><!---->Section 6.1 Red Hat Package Manager (RPM)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/06/02.html" aria-label="Section 6.2 Online Package Installation"><!---->Section 6.2 Online Package Installation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/06/03.html" aria-label="Section 6.3 Debian Package Manager (dpkg)"><!---->Section 6.3 Debian Package Manager (dpkg)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/06/04.html" aria-label="Section 6.4 Shared Libraries"><!---->Section 6.4 Shared Libraries<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">7.0 Users and Groups <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/07/01.html" aria-label="Section 7.1 User and Group Overview"><!---->Section 7.1 User and Group Overview<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/07/02.html" aria-label="Section 7.2 User Management"><!---->Section 7.2 User Management<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/07/03.html" aria-label="Section 7.3 Group Management"><!---->Section 7.3 Group Management<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/07/04.html" aria-label="Section 7.4 Troubleshoot User Issues"><!---->Section 7.4 Troubleshoot User Issues<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">8.0 Disk and File System Management <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/01.html" aria-label="Section 8.1 Storage Concepts"><!---->Section 8.1 Storage Concepts<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/02.html" aria-label="Section 8.2 MBR Disk Partitions"><!---->Section 8.2 MBR Disk Partitions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/03.html" aria-label="Section 8.3 GUID Partitions"><!---->Section 8.3 GUID Partitions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/04.html" aria-label="Section 8.4 Logical Volume Manager"><!---->Section 8.4 Logical Volume Manager<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/05.html" aria-label="Section 8.5 File Systems"><!---->Section 8.5 File Systems<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/06.html" aria-label="Section 8.6 Mounting File Systems"><!---->Section 8.6 Mounting File Systems<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/07.html" aria-label="Section 8.7 File System Maintenance"><!---->Section 8.7 File System Maintenance<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/08.html" aria-label="Section 8.8 Disk Quotas"><!---->Section 8.8 Disk Quotas<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/09.html" aria-label="Section 8.9 Ownership"><!---->Section 8.9 Ownership<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/10.html" aria-label="Section 8.10 Permissions"><!---->Section 8.10 Permissions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/11.html" aria-label="Section 8.11 The umask Command"><!---->Section 8.11 The umask Command<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/12.html" aria-label="Section 8.12 Special Permissions"><!---->Section 8.12 Special Permissions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/13.html" aria-label="Section 8.13 Access Control Lists"><!---->Section 8.13 Access Control Lists<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/14.html" aria-label="Section 8.14 Archive and Backup"><!---->Section 8.14 Archive and Backup<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/08/15.html" aria-label="Section 8.15 Troubleshooting Storage"><!---->Section 8.15 Troubleshooting Storage<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">9.0 Hardware Installation <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/09/01.html" aria-label="Section 9.1 Device Drivers"><!---->Section 9.1 Device Drivers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/09/02.html" aria-label="Section 9.2 Kernel Module Management"><!---->Section 9.2 Kernel Module Management<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/09/03.html" aria-label="Section 9.3 Hotplug and Coldplug Devices"><!---->Section 9.3 Hotplug and Coldplug Devices<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">10.0 Processes and System Services <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/10/01.html" aria-label="Section 10.1 Processes"><!---->Section 10.1 Processes<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/10/02.html" aria-label="Section 10.2 Process Management"><!---->Section 10.2 Process Management<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/10/03.html" aria-label="Section 10.3 Task Management"><!---->Section 10.3 Task Management<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/10/04.html" aria-label="Section 10.4 System Time Configuration"><!---->Section 10.4 System Time Configuration<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">11.0 System Monitoring <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/11/01.html" aria-label="Section 11.1 System Logging"><!---->Section 11.1 System Logging<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/11/02.html" aria-label="Section 11.2 Resource Monitoring"><!---->Section 11.2 Resource Monitoring<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">12.0 Networking <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/12/01.html" aria-label="Section 12.1 IPv4 Overview"><!---->Section 12.1 IPv4 Overview<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/12/02.html" aria-label="Section 12.2 Network Interface Configuration"><!---->Section 12.2 Network Interface Configuration<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/12/03.html" aria-label="Section 12.3 NetworkManager"><!---->Section 12.3 NetworkManager<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/12/04.html" aria-label="Section 12.4 IPv6 Overview"><!---->Section 12.4 IPv6 Overview<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/12/05.html" aria-label="Section 12.5 Routing Configuration"><!---->Section 12.5 Routing Configuration<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/12/06.html" aria-label="Section 12.6 Hostname and DNS Configuration"><!---->Section 12.6 Hostname and DNS Configuration<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/12/07.html" aria-label="Section 12.7 Linux Firewalls"><!---->Section 12.7 Linux Firewalls<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/12/08.html" aria-label="Section 12.8 Network Troubleshooting"><!---->Section 12.8 Network Troubleshooting<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">13.0 Cloud, Containers, and Virtualization <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/13/01.html" aria-label="Section 13.1 Cloud and Virtualization Overview"><!---->Section 13.1 Cloud and Virtualization Overview<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/13/02.html" aria-label="Section 13.2 Virtual Machines"><!---->Section 13.2 Virtual Machines<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/13/03.html" aria-label="Section 13.3 Sandboxed Applications"><!---->Section 13.3 Sandboxed Applications<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/13/04.html" aria-label="Section 13.4 Containers"><!---->Section 13.4 Containers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/13/05.html" aria-label="Section 13.5 Virtual Networking"><!---->Section 13.5 Virtual Networking<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">14.0 Scripting and Automation <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/14/01.html" aria-label="Section 14.1 Bash Shell Scripting"><!---->Section 14.1 Bash Shell Scripting<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/14/02.html" aria-label="Section 14.2 Shell Environments, Bash Variables and Parameters"><!---->Section 14.2 Shell Environments, Bash Variables and Parameters<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/14/03.html" aria-label="Section 14.3 Bash Scripting Logic"><!---->Section 14.3 Bash Scripting Logic<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/14/04.html" aria-label="Section 14.4 Version Control Using Git"><!---->Section 14.4 Version Control Using Git<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/14/05.html" aria-label="Section 14.5 Orchestration Processes and Concepts"><!---->Section 14.5 Orchestration Processes and Concepts<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">15.0 Security <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/01.html" aria-label="Section 15.1 Root Usage"><!---->Section 15.1 Root Usage<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/02.html" aria-label="Section 15.2 User Security and Restriction"><!---->Section 15.2 User Security and Restriction<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/03.html" aria-label="Section 15.3 Login Blocking"><!---->Section 15.3 Login Blocking<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/04.html" aria-label="Section 15.4 Network Security"><!---->Section 15.4 Network Security<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/05.html" aria-label="Section 15.5 OpenSSH"><!---->Section 15.5 OpenSSH<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/06.html" aria-label="Section 15.6 SSH Port Tunneling"><!---->Section 15.6 SSH Port Tunneling<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/07.html" aria-label="Section 15.7 Security-Enhanced Linux (SELinux)"><!---->Section 15.7 Security-Enhanced Linux (SELinux)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/08.html" aria-label="Section 15.8 Application Armor (AppArmor)"><!---->Section 15.8 Application Armor (AppArmor)<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/linux/15/09.html" aria-label="Section 15.9 Public Key Authentication"><!---->Section 15.9 Public Key Authentication<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/10.html" aria-label="Section 15.10 VPN Access and Authentication"><!---->Section 15.10 VPN Access and Authentication<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/linux/15/11.html" aria-label="Section 15.11 Security Best Practices"><!---->Section 15.11 Security Best Practices<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">A0 Linux Pro - Practice Exams <!----></p><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">B0 Linux Pro - CompTIA Linux+ <!----></p><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Glossary <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><p>As you study this section, answer the following questions:</p><ul><li> What is an MD5 checksum? How is it used in public key authentication? </li><li> Which file configures the server to accept public key authentication? </li><li> Which keys are generated by the <b class="fw-bold">ssh-keygen</b> command when you use the <b class="fw-bold">-t rsa</b> option? </li><li> Which utility should you use to copy encryption keys between Linux systems? </li><li>When is the <b class="fw-bold">~/authorized_keys</b> file used?</li><li> How can you configure a client to automatically provide the private key passphrase when establishing an SSH session? </li></ul><p>In this section, you will learn to:</p><ul><li>Configure public key authentication</li></ul><p>Key terms for this section include the following:</p><table class="terms"><thead><tr><th>Term</th><th>Definition</th></tr></thead><tbody><tr><td>Public key</td><td> Keys that are distributed to all hosts with whom the entity wants to communicate securely. </td></tr><tr><td>Private Key</td><td>Keys that are kept secret and known only to their owners.</td></tr><tr><td>Public key authentication</td><td> Authentication that employs a message to be encrypted and decrypted with different keys. </td></tr><tr><td>Digital signature</td><td> Uses an asymmetric key pair to allow a sender&#39;s identity to be verified by the recipient. </td></tr><tr><td>Message digest</td><td> A hash value used to help verify the integrity of sent messages. </td></tr></tbody></table><p>This section helps you prepare for the following certification exam objectives:</p><table class="objectives"><thead><tr><th>Exam</th><th>Objective</th></tr></thead><tbody><tr><td>TestOut Linux Pro</td><td> 4.3 Monitor and manage system access <ul><li>Manage remote connections</li></ul></td></tr><tr><td>CompTIA Linux+ XK0-005</td><td> 1.5 Given a scenario, use the appropriate networking tools or configuration files <br><ul><li>Remote networking tools</li><ul><li>Secure Shell (SSH)</li><li>Secure Copy Protocol (SCP)</li></ul></ul><p>1.7 Given a scenario, manage software configurations</p><ul><li>Configure common system services</li></ul><p> 2.1 Summarize the purpose and use of security best practices in a Linux environment </p><ul><li>Managing public key infrastructure (PKI) certificates</li><ul><li>Public key</li><li>Private key</li><li>Self-signed certificate</li><li>Digital signature</li><li>Wildcard certificate</li><li>Hashing</li></ul></ul><p> 2.4 Given a scenario, configure and execute remote connectivity for system management </p><ul><li>SSH</li><ul><li>Configuration files</li><ul><li>/etc/ssh/sshd_config</li><li>/etc/ssh/ssh_config</li><li>~/ssh/authorized_keys</li></ul><li>Commands</li><ul><li>ssh-keygen</li><li>ssh-copy-id</li><li>ssh-add</li></ul></ul></ul><p> 3.1 Given a scenario, create simple shell scripts to automate common tasks </p><ul><li> Shell script elements <ul><li>&gt;&gt;</li></ul></li></ul></td></tr></tbody></table><h2 id="_15-9-1-public-key-authentication" tabindex="-1"><a class="header-anchor" href="#_15-9-1-public-key-authentication"><span>15.9.1 Public Key Authentication</span></a></h2><p>Click one of the buttons to take you to that part of the video.</p><p>Public Key Authentication 00:00-00:23 When using SSH, an alternative to authenticating with a username and password is to authenticate using either an RSA or DSA public key. In this lesson, we&#39;ll take a look at how public key authentication works for authentication, then we&#39;ll go over how to generate and copy our keys, and we&#39;ll wrap up with testing logging in with our public key.</p><p>SSH Authentication with Public Keys 00:23-02:05 Before we can log in to SSH using our public key, we have to first pre-provision the server with the public key of the user. To do this, we need to manually add the public key from the user on the client system to the authorized_keys file located in the .ssh hidden directory of the user&#39;s home directory on the server system that we&#39;ll be authenticating as.</p><p>For example, we usually log in to this client computer using the ccole account. We need to do some work on the server and want to remote into it and authenticate as the ksmith user. The first step is to generate a public and private key pair for the ccole user. We&#39;ll then transfer the public key we just created over to the authorized_keys file located in the .ssh hidden directory inside the home directory of the ksmith user because that&#39;s whom we want to authenticate as. Keep in mind that only the public key is transferred over, and the private key must remain on the client computer.</p><p>With our keys copied over, we can configure the server to use SSH to authenticate our users. The client computer tells the server which public key to use for authentication. The server checks to make sure it has that key, and if it does, a random number is generated and encrypted using the public key. The encrypted number is sent back to the client, which uses the private key to decrypt the number. The client system then runs MD5 checksum on the number and sends that checksum value to the server. The server also runs an MD5 checksum on the number and then compares the two MD5 checksums. If they match, the key pair is valid, and the user is authenticated.</p><p>The first step in this process is to create that public/private key pair. Let&#39;s take a look at this process.</p><p>Generating the Key Pair 02:05-03:44 To generate our key pair, we want to use the ssh-keygen command on the client computer. When using this command, you can choose to create either a RSA or DSA key pair by using the appropriate switch. The private key will be saved in the .ssh hidden directory in your home directory. It will be named either id_rsa or id_dsa while your public key will be in the same directory but will have an extension of .pub. During the key generation process, you&#39;ll be asked to create a passphrase for that key. You want to make sure you do this because if someone gets ahold of your keys, they won&#39;t be able to use them without knowing the passphrase. It&#39;s also important for you to remember the passphrase of course.</p><p>Once our key pairs have been created, we need to copy the public key to the server. The simplest and most secure method is to use the secure copy command. In this example, we&#39;re going to copy our RSA key on the client computer to the ksmith account on the server and name it keyfile.</p><p>After copying the key to the server, we need to append it to the end of the authorized_keys file in the user&#39;s /home/.ssh hidden subdirectory. The easiest way to do this is to connect to the server using a standard SSH connection with the username and password of the user in question and then enter the command cat keyfile &gt;&gt; followed by the path and name of the authorized key file. Make sure you use two greater than signs, as this appends the key to the end of the file. Otherwise, you&#39;ll overwrite the entire file and wipe out any existing keys.</p><p>Once we&#39;ve got our key copied over and configured, we want to test everything to ensure we can authenticate using SSH.</p><p>Authentication 03:44-04:49 To test our configuration, we simply want to try to establish a new SSH session. If everything is working correctly, you should be prompted to supply the key file&#39;s passphrase instead of the standard username and password. Once you enter the passphrase, you should be authenticated on the SSH server. Then if everything matches up between the public key on the server and the public key on the client, then no password or username will be required to establish the SSH session.</p><p>If you want to, you can use the ssh-agent command to eliminate the need to enter that passphrase every time you establish an SSH connection with the remote server. The first thing you need to do is run ssh-agent bash on the client system at the shell prompt, and then run ssh-add, followed by the private key that&#39;s the companion of the public key you sent over to the SSH server. You&#39;ll then be prompted to specify the key file&#39;s passphrase. When you do that, the SSH agent will store it in memory, and then it will listen for SSH requests, and when one is created, it will automatically provide the specified passphrase.</p><p>Summary 04:49-05:14 That&#39;ll wrap up this lesson on public key authentication. In this lesson, we first went over the process of SSH authentication using public keys. We then looked at how to generate our key pairs and copy them to the server. We wrapped up with how to test that the authentication works and add the passphrase, so we&#39;re not prompted for it every time we connect to the SSH server.</p><h2 id="_15-9-2-configure-public-key-authentication" tabindex="-1"><a class="header-anchor" href="#_15-9-2-configure-public-key-authentication"><span>15.9.2 Configure Public Key Authentication</span></a></h2><p>Click one of the buttons to take you to that part of the video.</p><p>Configure Public Key Authentication 00:00-00:16 We are going to explore how to configure public key authentication between two systems—one running the SSHD daemon and the other running the SSH client. This will allow us to securely authenticate with the SSH client.</p><p>Configure SSHD Daemon 00:16-01:40 We first need to configure the SSH daemon on the destination host to allow public key authentication. To edit configurations for the SSH daemon on this system, I will switch to my root user account. Enabling public key authentication is done in the sshd_config file. To make changes, we will run nano /etc/ssh/sshd_config.</p><p>When using nano, an easy way to find the line that will allow you to enable public key authentication, is to press F6, and in the search field, type pubkeya, and press Enter. This takes us to the PubkeyAuthentication line.</p><p>The hash character at the beginning of the line identifies this configuration as disabled by default. To enable PubkeyAuthentication, delete the hash character. For public key authentication to work, we also need to enable the AuthorizedKeysFile, so remove that hash character as well. With that done, exit nano and save changes, using the default file name.</p><p>Before we can begin using public key authentication on this host, we need to restart the SSH daemon running on the system. To do that, run systemctl restart sshd. With public key authentication enabled on my host, the next step is to switch to the system where the SSH client will be run, and configure the public key authentication there.</p><p>Generate a Key Pair 01:40-02:39 Now let&#39;s switch to the client machine. I am logged in as Zoey.</p><p>First, we need to generate an RSA key pair. Type ssh-keygen. Running the command without any options will, by default, generate an RSA key. Press Enter, and the system begins generating an RSA key pair. And it prompts me to specify where we&#39;re going to save the private key in the key pair. By default, it will be saved in my user&#39;s .ssh hidden directory using the filename of id_rsa. Press Enter.</p><p>Next, enter the passphrase that will be used for this key. It&#39;s important to not forget the passphrase. You will need to use it each time you connect using this method. Enter the desired passphrase, and when prompted, enter the passphrase again to verify it.</p><p>We are told that the private key has been saved in id_rsa and the public key, the one we share to systems we are connecting to, is in id_rsa.pub.</p><p>Copy Public Key to /home Directory 02:39-03:52 To use public key authentication, we need to copy the public key file from this system over to the first system where the SSHD daemon is running. It is important to remember the file needs to be copied in a secure way, such as putting it on a USB drive and walking it over, or using some other secure method, such as the scp command. You do not want to attach the key file to an email and send it through the internet, since email is typically insecure.</p><p>I&#39;ll use the scp command. Enter scp and then specify that we want to copy the file from our .ssh hidden directory in Zoey&#39;s home directory named id_rsa.pub. To copy this to the home directory of the jsmith user, I&#39;ll enter jsmith@172.27.239.8: — this is the IP address for the host where we enabled public key authentication earlier.</p><p>When I press Enter, I&#39;m prompted to accept the fingerprint key, because this is the first time I&#39;ve made a connection to this host. Type yes, and press Enter. We now need to provide the password for the jsmith user account. We see that the file has been copied.</p><p>Copy Public Key to authorized_keys File 03:52-05:39 Next, we need to copy the file from the jsmith directory to the .ssh/authorized_keys file on the jsmith system. This could be done from the jsmith host, but we can also use SSH from here. Let&#39;s open a new SSH session by running ssh jsmith@172.27.239.8. Press Enter, type the password, and we&#39;re in. All actions at this point are as if we were working physically on jsmith&#39;s host. This is a remote connection to the host. We see the username and hostname have changed.</p><p>When we run ls -a, we see the id_rsa.pub file we copied earlier. It is important to verify that the .ssh hidden directory is there. If the directory is missing, you would need to create it. We need to add this public key file from Zoey&#39;s system to the authorized_keys file of the jsmith user. We will use the cat command to send its output to the required file. Let&#39;s enter cat id_rsa.pub. But now, instead of just displaying the key on the screen, we&#39;ll enter two greater than signs (&gt;&gt;) to export the results to the .ssh/authorized_keys file. Using two greater than signs is important because it allows us to add the new key to the end of the file. When we press Enter, the key is added.</p><p>To verify, let&#39;s run cat again on the .ssh/authorized_keys file. We see the key was added. Notice the key is associated with the Zoey account on the Kali system. With that verified, run exit, which will disconnect from the jsmith Ubuntu system. And now we are working as Zoey on her Kali system.</p><p>Test Public Key Authentication 05:39-06:03 We are ready to test the new configuration. Use the up key to bring up the previous command we used to connect using SSH, and press Enter. Instead of being prompted to provide the password for the jsmith user, I&#39;m being prompted to enter the passphrase to unlock the private key. Once entered, select Unlock, and we are connected as jsmith.</p><p>Let&#39;s close this session by typing exit.</p><p>Create Passphrase Shortcut for SSH Client 06:03-06:41 An advantage of using public key authentication, is to configure the system to remember the passphrase for connections. Run ssh-agent bash. Then run ssh-add .ssh/id_rsa. I&#39;m asked to enter the passphrase for the private key. This is the same passphrase we configured when we initially generated the key pair. When I press Enter, the identity has been added. When I establish an SSH connection as jsmith@172.27.239.8, I&#39;m connected without being prompted for the passphrase.</p><p>Summary 06:41-07:03 In this demonstration we explored how to configure public key authentication for the SSH server and client. We generated a key pair, copied the public key to the remote server, added the public key to the authorized_key file for the user, and authenticated to the system without providing a password.</p><h2 id="_15-9-3-public-key-authentication-facts" tabindex="-1"><a class="header-anchor" href="#_15-9-3-public-key-authentication-facts"><span>15.9.3 Public Key Authentication Facts</span></a></h2><p>This lesson covers the following topics:</p><ul><li>Authenticate using a public key</li><li>Enable public key authentication</li><li>Creating self-signed certificates</li></ul><h3 id="authenticate-using-a-public-key" tabindex="-1"><a class="header-anchor" href="#authenticate-using-a-public-key"><span>Authenticate Using a Public Key</span></a></h3><p>Public key authentication uses a public key instead of a username and password to authenticate an SSH connection.</p><p>The following method is used to authenticate using a public key:</p><ol><li> The client specifies which public key the server uses for authentication. Then, the server checks to ensure the key has previously been authenticated to the server. </li><li> If the key is known to the server, it encrypts a random number with the public key and sends the encrypted number to the client. </li><li> The client decrypts the number with a private key, and uses its own public key and the random number to create a hash (MD5 checksum). The client sends the hash back to the server. </li><li> The server uses the public key and the random number to create its own hash (MD5 checksum) and then checks whether both hash values match. </li><li> If the hashes match, the server grants access to the user. If the hashes do not match, the user is prompted to log in using a password. </li></ol><p>A digital signature uses an asymmetric key pair to allow a sender&#39;s identity to be verified by a recipient. The sender creates the digital signature with a private key. The recipient decrypts the signature with the corresponding public key to verify the signature. The digital signature provides non-repudiation, meaning that the sender can not repudiate being the sender of the message. Digital signatures do not provide message integrity.</p><p>Public keys can also verify the integrity of messages sent. To ensure message integrity, the sender of a message creates a hash value for the message being transmitted. This hash value is called a message digest. The sender sends both the message digest and the message to the recipient. The recipient creates a hash for the message. If the recipient&#39;s hash matches the message digest, the integrity of the message is verified.</p><h3 id="enable-public-key-authentication" tabindex="-1"><a class="header-anchor" href="#enable-public-key-authentication"><span>Enable Public Key Authentication</span></a></h3><p>Use the following commands and files to enable public key authentication:</p><table><thead><tr><th>Command</th><th>Function</th><th>Example</th></tr></thead><tbody><tr><td><b>/etc/ssh/sshd_config <br> etc/ssh/sshd.config</b></td><td> Configures the server to accept public key authentication. Commonly used options for configuring a public key authentication on the server include: <ul><li><b>PubkeyAuthentication</b> enables and disables public key authentication on the server. </li><li><b>AuthorizedKeysFile <i class="fs-italicize">location</i></b> specifies the location of the file that contains the public keys. </li></ul></td><td><b>PubkeyAuthentication yes</b> enables public key authentication on the server. <b><br> AuthorizedKeysFile .ssh/authorized_keys</b> specifies the location of the file that contains the public keys. </td></tr><tr><td><b>ssh-keygen</b></td><td> Creates a key on the client to use when authenticating to a server. <b>ssh-keygen</b> options include: <ul><li><b>-t</b> <b>dsa</b> creates a DSA key pair (e.g., id_dsa and id_dsa.pub). </li><li><b>-t rsa</b> creates an RSA key pair (e.g., id_rsa and id_rsa.pub). </li></ul></td><td><b>ssh-keygen -t dsa</b> creates a DSA key pair. <b><br> ssh-keygen -t rsa</b> creates an RSA key pair. </td></tr><tr><td><b>scp</b></td><td>Securely copies the client&#39;s public key file to the server.</td><td><b>scp ~/.ssh/id_rsa.pub bjones@hs2.corpnet.com:/home/bjones</b> / copies id_rsa.pub to the home directory of bjones. </td></tr><tr><td><b>ssh</b></td><td>Logs in to the server.</td><td><b>ssh -l bjones hs1</b> logs in to the hs1 computer as bjones. </td></tr><tr><td><b>cat</b></td><td> Appends the public key to the <b>~/authorized_keys</b> file. Be aware of the following: <ul><li> Overwriting the file deletes all other keys. <div><div class="to-info-box"><div class="to-info-box-body"><div class="to-icon large" aria-hidden="true" style="width:20px;"><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="circle-info" class="svg-inline--fa fa-circle-info" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM208 352c-8.8 0-16 7.2-16 16s7.2 16 16 16l96 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0 0-112c0-8.8-7.2-16-16-16l-40 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l24 0 0 96-32 0zm48-168a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></div><div class="to-info-box-body-content"><span> Be sure to use <b>&gt;&gt;</b> instead of <b>&gt;</b> when redirecting the output of the <b>cat</b> command.</span></div></div></div></div></li><li> If the same user logs in from multiple clients, the file must have all client keys in it. </li><li> Always remove the public key file after appending it to the <b>~/authorized_keys</b> file. </li></ul></td><td><b>cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</b> appends the id_rsa.pub file to the end of the authorized_keys file. </td></tr><tr><td><b>ssh-agent bash <br>ssh-add</b></td><td> Configures the client to automatically provide the private key passphrase when needed, so that it does not have to be typed for every new connection to a server. <ol><li>Use <b>ssh-agent bash</b> to enable passphrase agent.</li><li> Use <b>ssh-add</b> to specify the name of the private key to add to the agent. For protocol 2, this is one of the following: <ul><li><b>~/.ssh/id_rsa</b></li><li><b>~/.ssh/id_dsa</b></li></ul></li></ol> After the <b>ssh-add</b> command, enter the passphrase when prompted. The passphrase stays in memory while the user is logged into the client. </td><td><b>ssh-agent bash</b> enables passphrase automation. <b><br>ssh-add ~/.ssh/id_rsa</b> specifies the id_rsa file as the private key. </td></tr><tr><td><b>ssh-copy-id</b></td><td> Copies the public key of your default identity to the remote host using <b>ssh-copy-id user@hostname.com</b> . If you have only one ssh key, you do not have to enter your identity. </td><td><b>ssh-copy-id</b> copies your default identity to the remote host. <br><b>ssh-copy-id user@hostname.com</b> copies the public key of the specified user. </td></tr></tbody></table><h3 id="creating-self-signed-certificates" tabindex="-1"><a class="header-anchor" href="#creating-self-signed-certificates"><span>Creating Self-Signed Certificates</span></a></h3><p>A self-signed certificate lets you encrypt communication between your server and a client, but is not signed by any trusted certificate authorities. Therefore, users cannot use the certificate to validate the identity of your server automatically. Self-signed certificates are often used when you don’t have a domain name associated with your server, where the encrypted web interface is not user-facing.</p><p>The exact steps to create a self-signed certificate will vary from distribution to distribution. The following is one example of how to create a self-signed certificate on Ubuntu. These steps may need to be modified for other distributions.</p><p>To create a self-signed certificate, open a terminal and as root or using sudo, run the following command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">openssl req <span class="token parameter variable">-x509</span> <span class="token parameter variable">-nodes</span> <span class="token parameter variable">-days</span> <span class="token number">365</span> <span class="token parameter variable">-newkey</span> rsa:2048 <span class="token parameter variable">-keyout</span> /etc/ssl/private/my-selfsigned.key <span class="token parameter variable">-out</span> /etc/ssl/certs/my-selfsigned.crt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th>Commands / Options</th><th>Description</th></tr></thead><tbody><tr><td><b>openssl</b></td><td> The command used for creating and managing OpenSSL certificates. </td></tr><tr><td><b>req</b></td><td> Specifies that the X.509 certificate signing request (CSR) will be used. X.509 is a public key infrastructure standard that SSL and TLS adhere to for key and certificate management. </td></tr><tr><td><b>-x509</b></td><td> Specifies that the certificate being created will be self-signed, instead of a signed certificate. </td></tr><tr><td><b>-nodes</b></td><td> Specifies that OpenSSL should skip the option to secure our certificate with a passphrase. This allows a connection to the server (such as an Apache Web server) without user intervention. </td></tr><tr><td><b>-days <i>xxx</i></b></td><td> Specifies the length of time that the certificate will be considered valid, where <i>xxx</i> is the number of days. </td></tr><tr><td><b>-newkey rsa:2048</b></td><td> Specifies that the a new certificate and new key will be created at the same time. The <b>rsa:2048</b> portion says to make an RSA key that is 2048 bits long. </td></tr><tr><td><b>-keyout</b></td><td> Specifies the directory and filename for the private key being created. </td></tr><tr><td><b>-out</b></td><td> Specifies the directory and filename for the self-signed key being created. </td></tr></tbody></table><p>The following steps may also be required to use the self-signed certificate:</p><ul><li>Configure the server to use SSL.</li><li> Adjust the firewall. If you are using the ufw firewall in the enabled mode, you might need to adjust the settings to allow for SSL traffic. </li><li> Install the self-signed certificate in your server, such as the Apache Web server. </li><li>Restart the server.</li><li>Test the website with https.</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/linux/15/08.html" aria-label="Section 15.8 Application Armor (AppArmor)"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Section 15.8 Application Armor (AppArmor)</span></div></a><a class="route-link auto-link next" href="/linux/15/10.html" aria-label="Section 15.10 VPN Access and Authentication"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Section 15.10 VPN Access and Authentication</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/linux/assets/app-D-CuBheB.js" defer></script>
  </body>
</html>
