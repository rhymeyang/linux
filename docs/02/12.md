---
lang: zh-CN
title: Section 2.12 Locating and Searching Files
description: some description
---

As you study this section, answer the following questions:

<ul><li>What are the advantages to using <b >locate</b> over <b >find</b> ? What are the disadvantages?</li>
    <li>When would you use the <b >which</b> command to locate a file?</li>
    <li>Which command can you use to locate a file?</li>
    <li>Which command can you use to locate a command and get information about it?</li>
    <li>What does it mean when a command is hashed?</li>
    <li>How can you discover a command's category?</li>
<li>Which commands can you use to search for text within files?</li></ul>

In this section, you will learn to:

<ul><li>Find Linux commands</li>
    <li>Find files</li>
    <li>Find file content</li>
<li>Use grep</li></ul>

This section helps you prepare for the following certification exam objectives:

<table class="objectives">
   <thead><tr><th  >
     Exam</th>
    <th >
     Objective</th></tr></thead>
   <tbody><tr><td>TestOut Linux Pro</td>
     <td>1.1 Use command line utilities
      <ul><li>View, search, and edit the contents of text files</li></ul>
      <p>2.2 Mange the file system</p>
      <ul><li>View information about directories and files in the file 
				system</li></ul></td></tr>
    <tr><td>CompTIA Linux+ XK0-005</td>
     <td>3.1 Given a scenario, create simple shell scripts to automate common tasks
      <br>
      <ul><li>Shell script elements
        <ul><li>Shell parameter expansion
          <ul><li>Globbing</li></ul></li>
         <li>Regular expressions</li></ul></li>
       <li>Shell built-in commands</li>
       <li>Common script utilities</li>
       <ul><li>find</li>
        <li>grep</li>
        <li>egrep</li></ul></ul></td></tr></tbody></table>

## 2.12.1 File Location Utilities

## 2.12.2 Finding Linux Commands

## 2.12.3 Finding Files

## 2.12.4 File Search Facts

A Linux administrator must possess the skills to find the location of files in a file system.

This lesson covers the following topic:

- Commands to find a file

### Commands to Find a File

Use the commands in the following table to find file locations.

<table><thead><tr><th>Command</th>
<th>Description</th>
<th>Examples</th></tr></thead>
<tbody><tr><td><b >find</b></td>
<td>Searches through all files based on the file system by name, file size, time created, and other options. Be aware of the
following <b >find</b> command options:
<ul><li><b >-name</b> locates a file or directory by name in a specific path. When using <b >-name</b> :
<ul><li>Enclose name strings in single quotes.</li>
<li>Use wildcards for partial names.</li>
<li>Use <b >-iname</b> to ignore case.</li></ul></li>
<li><b >-user</b> finds files owned by a specific user.</li>
<li><b >-size</b> finds files of a specific size. Use the following options:
<ul><li><b >c</b> for bytes</li>
<li><b >k</b> for kilobytes</li>
<li><b >M</b> for megabytes</li></ul></li>
<li><b >-mtime</b> finds files last modified before or after a specified number of days ago.</li>
<li><b >-type [ <i >f</i> or <i >d</i> ]</b> specifies whether to find files or directories.</li>
<li><b >-maxdepth</b> specifies how many levels down to search.</li>
<li>- <b >print0</b> finds filenames with spaces.</li>
<li><b >-o</b> specifies the <i >or</i> parameter when searching with multiple criteria.</li>
<li><b >.</b> (period) specifies the search locations as the current directory and subdirectories.</li></ul></td>
<td><ul><li><b >find /user/home -name '*.txt'</b> finds all files with an extension of .txt in the /user/home directory.</li>
<li><b >find / -name '*paper*'</b> looks through the entire directory for any filenames or directory names that
contains "paper" (e.g., termpaper.odt or wallpaper.jpg).</li>
<li><b >find /user/home -size -300k</b> finds all files in the /user/home directory smaller than 300 K.</li>
<li><b >find /user/home -size +300k</b> finds all files in the /user/home directory larger than 300 K.</li>
<li><b >find /user/home -mtime -5</b> finds all files in the /user/home directory modified within the last five days.</li>
<li><b >find / -type f -name '*paper*'</b> finds only filenames that contain "paper".</li>
<li><b >find / -type d -name '*paper*'</b> finds only directory names that contain "paper".</li>
<li><b >find -maxdepth 3 / -name '*.txt'</b> finds .txt files three directory levels down from the root
directory.</li>
<li><b >find -print0 -name '*.txt'</b> finds .txt files with spaces in the name (e.g., myreport.txt and my
report.txt). Without the - <b >print0</b> option, only files without spaces are listed.</li></ul></td></tr>
<tr><td><b >locate</b></td>
<td>Searches for files in the file system. The <b >locate</b> utility maintains a database containing a listing of all the files
and directories in the file system. Be aware that the <b >locate</b> command:
<ul><li>Searches through an index instead of the actual file system. Because of this, the locate command usually runs much
faster than the find command.</li>
<li>Searches all files if no path is specified.</li>
<li>Maintains an index of all files and directories in the <i >/var/log/locatedb</i> file.</li>
<li>Uses the <b >updatedb</b> command to update the index. (The <i >/etc/updatedb.conf</i> file is used to configure for updatedb.)</li>
<li style="list-style: none; display: inline">
<div><div class="to-info-box"><div class="to-info-box-body"><span class="to-icon large" aria-hidden="true"><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="circle-info" class="svg-inline--fa fa-circle-info " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM208 352c-8.8 0-16 7.2-16 16s7.2 16 16 16l96 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0 0-112c0-8.8-7.2-16-16-16l-40 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l24 0 0 96-32 0zm48-168a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></span><div class="to-info-box-body-content"><span>
The index is updated on a regular schedule. This means it is possible for locate to find a file in the index that no longer exists in the actual file system. Likewise, it is possible for locate not to find a new file in the file system that has not been added to the index yet.</span></div></div></div></div></li></ul>
<h2 >locate</h2>
<ul><li><b >-c</b> counts the number of entries rather than list them.</li>
<li><b >-e</b> lists files only after verifying that they exist.</li>
<li><b >-i</b> ignores case.</li>
<li><b >-l</b> limits the number of files listed.</li>
<li><b >-b</b> searches for the string in only file or directory base names.</li></ul></td>
<td><ul><li><b >updatedb</b> updates the index file (/var/log/locatedb).</li>
<li><b >locate /user/home paper</b> locates all files with the string <i >paper</i> as any part of the filename or directory path under the /user/home directory.</li>
<li><b >locate lib</b> locates all files with the string <i >lib</i> anywhere in the filename or directory path.</li>
<li><b >locate -c lib</b> counts the number of files with the string <i >lib</i> (e.g., 46512).</li>
<li><b >locate -e .odt</b> verifies that all .odt files listed in the file index actually exist before it lists them.</li>
<li><b >locate -i LibraryFines.csv</b> finds the libraryfines.csv file regardless of case.</li>
<li><b >locate -l 25 lib</b> lists only the first 25 files from the file index that contain the string <i >lib</i> .</li>
<li><b >locate -b lib</b> displays /var/lib and /user/home/libraryfines.csv but not /var/lib/usbutils/usb.ids.</li></ul>
<div><div class="to-info-box"><div class="to-info-box-body"><span class="to-icon large" aria-hidden="true"><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="circle-info" class="svg-inline--fa fa-circle-info " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM208 352c-8.8 0-16 7.2-16 16s7.2 16 16 16l96 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0 0-112c0-8.8-7.2-16-16-16l-40 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l24 0 0 96-32 0zm48-168a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"></path></svg></span><div class="to-info-box-body-content"><span>
If the search pattern contains no globbing characters, such as the wildcard character (*), locate behaves as if the pattern begins and ends with a wildcard. For example, searching for <i>paper</i> is the same as searching for <i>*paper*</i> .</span></div></div></div></div></td></tr>
<tr><td><b >which</b></td>
<td>Displays the path to a command and determines whether a package is installed.</td>
<td><ul><li><b >which ls</b> shows the path to the ls binary (executable) file.</li>
<li><b >which photorec</b> shows the path to the photorec binary file if photorec is installed and in found in the PATH.</li></ul></td></tr>
<tr><td><b >whereis</b></td>
<td>Displays the path to a Linux command's binary files, manual pages, and source code (if sources are installed). Be aware
of the following <b >whereis</b> command options:
<ul><li><b >-b</b> lists the path to the binary file (similar to <i >which</i> ).</li>
<li><b >-m</b> lists the path to the man page files.</li>
<li><b >-s</b> lists the location of the source code.</li>
<li><b >-u</b> lists entries that do not have source code, binary file, and man page locations.</li></ul>
<p>When no options are specified, whereis shows all available data.</p></td>
<td><ul><li><b >whereis ls</b> lists information about the ls command.</li></ul></td></tr>
<tr><td><b >type</b></td>
<td><p>Displays a command's type. Possible categories include:</p>
<ul><li>A built-in shell command</li>
<li>A command that the shell calls</li>
<li>An aliased command</li>
<li>A function</li></ul>
<p>If a called command has been used recently, the output says that the command is hashed, which means that it is in
the shell's hash table.</p></td>
<td><ul><li><b >type cd</b> displays <i >cd is a shell built-in</i> .</li>
<li><b >type more</b> displays the path to the binary file for <i >more</i> .</li></ul></td></tr></tbody></table>

> The term **file globbing** refers to the use of wildcards (e.g., _ , _._ , _.txt) to match specific files.

## 2.12.5 Content Search Utilities

## 2.12.6 Find File Content

## 2.12.7 Content Search Facts

A Linux administrator must possess the skills to locate text within the contents of a file.

This lesson covers the following topics:

- File search commands
- The diff command

### File Search Commands

#### grep

<table><thead><tr><th class_="firstTableHeader" scope="col" >
     Command</th>
    <th scope="col" >
     Description</th>
    <th scope="col" >
     Examples</th></tr></thead>
   <tbody><tr><td><b >grep</b></td>
    <td>Searches through files for a specified character string. By default, <b >grep</b> is context sensitive and displays the
        string in the context of the line containing the string.
     <ul><li><b >-A <i >[number]</i></b> prints a specified number of lines following the matching lines.</li>
      <li><b >-a</b> searches binary (executable) files as though they were text files.</li>
      <li><b >-B <i >[number]</i></b> prints a specified number of lines before the matching lines.</li>
      <li><b >-C <i >[number]</i></b> prints a specified number of lines of context around the matching lines.</li>
      <li><b >-c</b> shows the number of matches of the string for the file.</li>
      <li><b >-E</b> uses regular expressions for the text pattern.</li>
      <li><b >-e <i >[pattern]</i></b> specifies a literal pattern.</li>
      <li><b >-f</b> searches for multiple strings using a file that lists the string patterns.</li>
      <li><strong >-i</strong>
       ignores case sensitivity in a search string.</li>
      <li><b >-l</b> lists just the names of the files with a match. This is used 
			to search multiple files.</li>
      <li><b >-m <i >[number]</i></b> shows only a specified number of matches for a file.</li>
      <li><b >-n</b> displays the line number of the lines containing the term.</li>
      <li><b >-r</b> searches the directory and all subdirectories for files containing the term.</li>
      <li><b >-v</b> displays non-matching lines.</li>
      <li><b >--include= <i >[file_name]</i></b> searches only in files with names that match a specified string.</li>
      <li><b >--exclude= <i >[file_name]</i></b> searches in files with names that do not match a specified string.</li>
      <li><b >-w</b> searches for whole words only.</li></ul></td>
    <td><ul><li><b >grep -A 3 Midway ~/docs/WWII-report</b> searches WWII-report for the pattern "Midway" and prints the
          line and the next three lines.</li>
      <li><b >grep -a var11 /bin</b> searches all files, including binary files, in the /bin directory for the pattern
          "var11".</li>
      <li><b >grep -C -3 Midway ~/docs/WWII-report</b> shows the specified 
			number of lines preceding and following the matching lines.</li>
      <li><b >grep -c Midway ~/docs/WWII-report</b> shows a number 
			representing the number of times the pattern "Midway" was found in
          the WWII-report file.</li>
      <li><b >grep -e '--count' ~/docs/doc1</b> looks for the pattern "--count" in the doc1 file rather than
          interpreting it as an option.</li>
      <li><b >grep -l -r Midway ~/docs</b> shows the name of all files in the /home/user/docs directory that contain the term
          "Midway".</li>
      <li><b >grep -m 2 battle ~/docs/WWII-report</b> shows only the first two times the term "battle" is found in the
          file.</li>
      <li><b >grep -n -i customVariable1 ~/java/program1.java</b> shows the line numbers of lines that have the term
          "customVariable1" in the program1.java file. This ignores the case.</li>
      <li><b >grep -r battle ~/docs/</b> searches the directory and all subdirectories for the term "battle".</li>
      <li><b >grep -w tank ~/docs/WWII-report</b> searches only for the whole word "tank" in the file.</li></ul></td></tr>
   <tr><td><b >egrep</b></td>
    <td>Uses regular expressions in the search strings. The <b >egrep</b> command uses the same options and syntax as <b >grep</b> and is identical to <b >grep -E</b> . Constructors for <b >egrep</b> regular expressions include:
     <ul><li><b >^</b> matches terms that occur at the beginning of a line.</li>
      <li><b >$</b> matches terms that occur at the end of a line.</li>
      <li><b >\&lt;</b> matches words that begin with the term.</li>
      <li><b >\&gt;</b> matches words that end with the term.</li>
      <li><b >[ <i >asdf</i> ]</b> matches any one of the characters in the brackets.</li>
      <li><b >[ <i >0-9</i> ]</b> matches any of the range of numbers 0-9.</li>
      <li><b >[^ <i >xyz</i> ]</b> omits any one of the letters in the list</li>
      <li><b >.</b> matches any single character.</li>
      <li><b >[ <i >asdf</i> ]+</b> matches one or more of the characters in the list.</li>
      <li><b >*</b> matches any number or none of the preceding single character.</li>
      <li><b >|</b> matches either of the terms.</li>
      <li><b >\</b> displays the literal value of a character used for expressions.</li>
      <li><b >()</b> groups expressions.</li></ul></td>
    <td><ul><li><b >egrep ^FAILURE ~/error_logs</b> matches the term "FAILURE" when it is at the beginning of the line in
          error_logs.</li>
      <li><b >egrep tty7$ ~/.bash_history</b> matches the term "tty7" when it is at the end of the line.</li>
      <li><b >egrep \&lt;are ~/myfile</b> matches all words or strings that begin with "are" (e.g., "are",
          "area", and "arena").</li>
      <li><b >egrep \&gt;are ~/myfile</b> matches all words or strings that end with "are" (e.g., "are",
          "hare", and "aware").</li>
      <li><b >egrep watche[ds] ~/myfile</b> matches either "watched" or "watches".</li>
      <li><b >egrep exhibit[0-9] ~/myfile</b> matches "exhibit1", "exhibit3", or "exhibit8".</li>
      <li><b >egrep [^Xx]mas ~/myfile</b> matches "Christmas" but not "xmas" or "Xmas".</li>
      <li><b >egrep .are ~/myfile</b> matches "hare" and "care", but not "aware" or
          "are".</li>
      <li><b >egrep file[0-9]+ ~/myfile</b> matches "file0", "file10", and "file15636".</li>
      <li><b >egrep fil* ~/myfile</b> matches "fil", "filll", and "fillllllllllllllll".</li>
      <li><b >egrep fil.* ~/myfile</b> matches "file", "fill", "file102", and
          "filings".</li>
      <li><b >egrep men|women ~/myfile</b> matches "men" or "women".</li>
<li><b >egrep Hello\? ~/myfile</b> matches "Hello?".</li></ul></td></tr>
<tr><td><b >fgrep</b></td>
<td>Uses a file as the source for the string patterns. When searching for fixed strings rather than regular expressions, <b >fgrep</b> :
<ul><li>Uses the same options as the <b >grep</b> command and has the same syntax.</li>
<li>Is identical to <b >grep -F</b> , but searches faster than <b >grep</b> .</li>
<li>Interprets the pattern as a list of fixed strings, any of which can be matched.</li></ul></td>
<td><ul><li><b >fgrep Midway Nimitz ~/docs/myfile</b> searches myfile for lines containing "Midway" or "Nimitz".</li></ul></td></tr></tbody></table>

### The diff Command

#### diff

<table><thead><tr><th class_="firstTableHeader" scope="col" >
     Command</th>
    <th scope="col" >
     Description</th>
    <th scope="col" >
     Examples</th></tr></thead>
   <tbody><tr><td><b >diff</b></td>
    <td>Displays the differences between two files, line by line. The output can contain the following characters:
     <ul><li>&lt; <i >[text]</i> : only the first file contains this text.</li>
      <li>&gt; <i >[text]</i> : only the second file contains this text.</li>
      <li>a : text has been added.</li>
      <li>c : text has changed.</li>
<li>d : text has been deleted.</li></ul>
<h2 >diff</h2>
<ul><li><b >-c</b> displays differences in context mode.</li>
<li><b >-u <i >[number]</i></b> prints a specified number of lines in a unified context.</li>
<li><b >-i</b> ignores the case and treats uppercase and lowercase the same.</li>
<li><b >-w</b> ignores all white space.</li>
<li><b >-y</b> displays the output in two columns.</li></ul></td>
<td><ul><li><b >diff file1.txt file2.txt</b> displays the differences using the default display mode.</li>
<li><b >diff -c file1.txt file2.txt</b> displays the differences using the context mode.</li></ul></td></tr></tbody></table>
