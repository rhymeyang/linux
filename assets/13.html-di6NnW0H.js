import{_ as n,c as i,a as s,b as e,d as l,o as a}from"./app-D1coV0d2.js";const o={};function r(u,t){return a(),i("div",null,t[0]||(t[0]=[s('<p>As you study this section, answer the following questions:</p><ul><li>How can text stream processing be used to modify text output?</li><li>Which command would you use to remove characters from lines of text in a text stream?</li><li>How could you format files with long lines to display properly on the monitor?</li><li>Which command would you use to format a text file for printing?</li><li>Which commands replace a tab character with a specified number of spaces and vice versa?</li><li>How can you display a text stream with numbers preceding each line?</li></ul><p>In this section, you will learn to:</p><ul><li>Process text streams</li></ul><p>Key terms for this section include the following:</p><table class="terms"><thead><tr><th>Term</th><th> Definition</th></tr></thead><tbody><tr><td>Text stream</td><td>Any information redirected from the standard output of a command to the standard input of another command.</td></tr></tbody></table><p>This section helps you prepare for the following certification exam objectives:</p><table class="objectives"><thead><tr><th>Exam</th><th> Objective</th></tr></thead><tbody><tr><td>CompTIA Linux+ XK0-005</td><td>1.2 Given a scenario, manage files and directories <ul><li>File editing <ul><li>sed</li><li>awk</li><li>printf</li></ul></li></ul><p>3.1 Given a scenario, create simple shell scripts to automate common tasks <br></p><ul><li>Common script utilities</li><ul><li>awk</li><li>sed</li><li>wc</li><li>cut</li><li>tr</li></ul></ul></td></tr></tbody></table><h2 id="_2-13-1-text-stream-processing-facts" tabindex="-1"><a class="header-anchor" href="#_2-13-1-text-stream-processing-facts"><span>2.13.1 Text Stream Processing Facts</span></a></h2><p>When you are processing a text stream within a script or piping output at the shell prompt, you may need to alter the output of one command, allowing only certain portions of the text stream to pass along to the stdin of the next command.</p><p>This lesson covers the following topic:</p><ul><li>Text stream processing commands</li></ul><h3 id="text-stream-processing-commands" tabindex="-1"><a class="header-anchor" href="#text-stream-processing-commands"><span>Text Stream Processing Commands</span></a></h3><p>A text stream is any information redirected from the standard output of a command to the standard input of another command. The following commands can be used to intercept and process the text stream.</p>',14),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Command"),e("th",null,"Function"),e("th",null,"Example")])]),e("tbody",null,[e("tr",null,[e("td",null,[e("b",null,"cut")]),e("td",null,[l("Prints just the columns or fields that you specify to the standard output. By default, the tab character is used as a delimiter to define each field. Options include the following: "),e("ul",null,[e("li",null,[e("b",null,"-c"),l(" cuts characters.")]),e("li",null,[e("b",null,"-f"),l(" cuts fields.")]),e("li",null,[e("b",null,"-d"),l(" specifies the character used as the field delimiter. The default is a tab.")]),e("li",null,[e("b",null,"-s"),l(" removes lines that do not have a field delimiter.")]),e("li",null,[e("b",null,"-d' '"),l(" specifies a space as the field delimiter.")])])]),e("td",null,[l(" For the following example, a file named myfile has the following text: "),e("p",null,[l("http://www.site1.com "),e("br"),l("http://www.mysite.com "),e("br"),l("http://www.anothersite.com")]),e("h2",null,"cut -c1-7 myfile")])]),e("tr",null,[e("td",null,[e("b",null,"expand")]),e("td",null,[l(" Replaces a tab character with a specified number of spaces. "),e("ul",null,[e("li",null,"The default is eight spaces."),e("li",null,[e("b",null,"-t"),l(" specifies the number of spaces to be used.")])])]),e("td",null,[e("b",null,"expand -t 1 myfile"),l(" replaces each tab character in the file with a single space.")])]),e("tr",null,[e("td",null,[e("b",null,"fmt")]),e("td",null,[l(" Formats lines in a file or text stream to a uniform length. This is useful to format long lines of text to fit in a terminal window. Options include: "),e("ul",null,[e("li",null,[e("b",null,"-w"),l(" specifies the number of characters for the width. The default is 75.")]),e("li",null,[e("b",null,"-s"),l(" prevents the command from formatting lines shorter than the specified length. This command is often used with code text to keep lines of code separate.")])])]),e("td",null,[e("b",null,"fmt -w 80 myfile"),l(" sends the contents of myfile to standard output, with all lines having a uniform length of 80 characters.")])]),e("tr",null,[e("td",null,[e("b",null,"join")]),e("td",null,[l(" Combines text from two files based on identical fields and sends the result to standard output. By default, fields are offset by whitespace. Options include the following: "),e("ul",null,[e("li",null,[e("b",null,"-i"),l(" ignores case when searching for identical text.")]),e("li",null,[e("b",null,"-j"),l(" specifies the number of the field to use when joining. This specifies both files.")]),e("li",null,[e("b",null,"-1"),l(" specifies the number of the field from the first listed file to use when joining.")]),e("li",null,[e("b",null,"-2"),l(" specifies the number of the field from the second listed file to use when joining.")]),e("li",null,[e("b",null,"-t"),l(" specifies the character to use as the field delimiter.")])])]),e("td",null,[l(" File1 has the following text: "),e("p",null,[l("1 Mark Twain "),e("br"),l("2 William Shakespeare "),e("br"),l("3 John Steinbeck")]),e("p",null,"File2 has the following text:"),e("p",null,[l("1 Tom Sawyer "),e("br"),l("2 Othello "),e("br"),l("3 Of Mice and Men")]),e("h2",null,"join file1 file2"),e("p",null,[l("1 Mark Twain Tom Sawyer "),e("br"),l("2 William Shakespeare Othello "),e("br"),l("3 John Steinbeck Of Mice and Men")]),e("h2",null,"join -j 3 -t : fileA fileB")])]),e("tr",null,[e("td",null,[e("b",null,"nl")]),e("td",null,[l("Places a line number in front of each line in a text file and sends the result to standard output. Options include the following: "),e("ul",null,[e("li",null,[e("b",null,"-i"),l(" specifies the increment to use when numbering the lines.")]),e("li",null,[e("b",null,"-v"),l(" specifies the starting number.")]),e("li",null,[e("b",null,"-s"),l(" specifies the text to be placed between the number and the line. The default is two spaces.")])])]),e("td",null,[e("b",null,'nl -s ":" myfile'),l(" adds the number, a colon, and a space to the front of each line in the file.")])]),e("tr",null,[e("td",null,[e("b",null,"od")]),e("td",null,[l("Displays the contents of any file in octal, decimal, hexadecimal, or character format. Options include the following: "),e("ul",null,[e("li",null,[e("b",null,"-b"),l(" specifies an octal dump.")]),e("li",null,[e("b",null,"-d"),l(" specifies a decimal dump.")]),e("li",null,[e("b",null,"-x"),l(" specifies a hexadecimal dump.")]),e("li",null,[e("b",null,"-c"),l(" specifies a character dump.")])])]),e("td",null,[e("b",null,"od -c /bin/tar"),l(" shows the contents of the tar command executable in character format.")])]),e("tr",null,[e("td",null,[e("b",null,"paste")]),e("td",null,[l("Adds the contents of one file to the contents of another file on a line-by-line basis. "),e("ul",null,[e("li",null,"By default, the tab character is used to separate columns."),e("li",null,[e("b",null,"-d"),l(" specifies a character to place between the conjoined lines of each file. Only a single character can be specified.")])])]),e("td",null,[e("b",null,"paste -d @ file1 file2"),l(" conjoins each line of file2 to the end of each line of file1 and places an "),e("i",null,"@"),l(" between each line pair.")])]),e("tr",null,[e("td",null,[e("b",null,"pr")]),e("td",null,[l(" Formats a text file for printing. By default, this command: "),e("ul",null,[e("li",null,"Separates files into 66-line pages."),e("li",null,"Uses the first five lines to create a header that contains a page number, the time and date, and the path to the file."),e("li",null,"Uses the last five lines to create a footer of blank lines.")]),e("p",null,"Options include the following:"),e("ul",null,[e("li",null,[e("b",null,"-d"),l(" double-spaces the lines.")]),e("li",null,[e("b",null,"-h"),l(" specifies text to replace the file name in the header.")]),e("li",null,[e("b",null,"-l"),l(" specifies the number of lines. The default is 66.")]),e("li",null,[e("b",null,"-t"),l(" prevents the command from creating the header and footer.")]),e("li",null,[e("b",null,"-o"),l(" creates a margin on the left side of the text.")])])]),e("td",null,[e("b",null,"pr myfile"),l(" sends the text to standard output using default settings. "),e("br"),e("br"),l(),e("b",null,"pr -d -l 60 -t -o 5 myfile"),l(" sends the text to standard output using double spacing, a page length of 60 lines, no headers or footers, and a five-space margin on the left side.")])]),e("tr",null,[e("td",null,[e("b",null,"sed")]),e("td",null,[l("Takes text or commands from the command line as input and modifies the text document named in the command line. "),e("b",null,"sed"),l(" is particularly useful under the following circumstances: "),e("ul",null,[e("li",null,"When a file is too large to open and edit conveniently in a text editor."),e("li",null,"When the series of edits (for example, adding line spacing, margins, replacing text) is too complex to perform easily in a text editor."),e("li",null,"When it is easier to perform a series of global document changes.")]),e("p",null,"Flags and options include the following:"),e("ul",null,[e("li",null,[e("b",null,"s"),l(" replaces the text behind the first "),e("b",null,"/"),l(" with the text behind the second "),e("b",null,"/"),l(" . To save the results of the command, use "),e("b",null,">"),l(" to redirect the output to a new file.")]),e("li",null,[e("b",null,"d"),l(" deletes lines that contain the specified term.")]),e("li",null,[e("b",null,"g"),l(" changes all occurrences of the term in a line.")]),e("li",null,[e("b",null,"p"),l(" prints the modified lines in addition to the standard output.")]),e("li",null,[e("b",null,"-n"),l(" suppresses all printing. The "),e("b",null,"p"),l(" flag can be used to print the modified lines.")]),e("li",null,[e("b",null,"-e"),l(" allows multiple commands in as "),e("b",null,"sed"),l(" operation.")]),e("li",null,[e("b",null,"-f"),l(" calls a file filled with editing commands (one command per line) to perform a number of operations at one time instead of doing them individually from the command line.")])])]),e("td",null,[e("b",null,[l("sed 's/Nancy/Nanci/' "),e("i",null,"originalfilename"),l(" > "),e("i",null,"newfilename")]),l(' replaces every occurrence of "Nancy" with "Nanci." '),e("br"),e("br"),l(),e("b",null,[l("sed -n '/there were no credible/,/transfer assets abroad/p' "),e("i",null,"filename")]),l(' displays only the text of a paragraph beginning with "there were no credible" and ending with "transfer assets abroad." '),e("b",null,[e("br"),l(" sed -n 56,89p "),e("i",null,"filename")]),l(" displays lines 56 through 89 of the specified file. "),e("br"),e("br"),l(),e("b",null,[l("sed -e 's/J.K.W/James K. Whitworth, Esq./' -e 's/Hillary Stuart/Ms. Mary Edwards' -e s/Johnson, Gabriel, and Hawkins/McPhee, Larkin, Simmons' "),e("i",null,"originalfilename"),l(" > "),e("i",null,"newfilename")]),l(" allows three substitution commands to occur at the same time. "),e("b",null,[e("br"),e("br"),l(" sed -f "),e("i",null,"scriptfilename"),l(),e("i",null,"originalfilename"),l(" > "),e("i",null,"newfilename")]),l(" treats the scriptfilename file as a script file, running each command against the text in the original file and saving the results to the new file. "),e("br"),e("br"),l(),e("b",null,"echo night day night | sed s/night/day/g"),l(" changes both instances of the term night to day. Without the trailing "),e("b",null,"g"),l(" flag, only the first instance changes.")])]),e("tr",null,[e("td",null,[e("b",null,"awk")]),e("td",null,[l(" Creates reports based on the data you retrieve from files, builds databases, or performs mathematical operations against numbers in text files. "),e("p",null,"Be aware of the following patterns and actions:"),e("ul",null,[e("li",null,[e("b",null,"-f"),l(" specifies a file containing "),e("b",null,"awk"),l(" commands to be used.")]),e("li",null,[e("b",null,"-F"),l(" specifies the field delimiter to be used. The default is whitespace.")]),e("li",null,[e("b",null,"$"),l(),e("i",null,"#"),l(" is used to designate fields. For example, "),e("i",null,"$6"),l(" is the sixth field in a line.")]),e("li",null,[e("b",null,"\\t"),l(" inserts a tab.")]),e("li",null,[e("b",null,"\\n"),l(" inserts a newline character.")]),e("li",null,[e("b",null,"\\f"),l(" inserts a form-feed character.")]),e("li",null,[e("b",null,"\\r"),l(" inserts a carriage return.")])])]),e("td",null,[e("b",null,"awk -F: '{print $1}' /etc/passwd | sort"),l(" prints a sorted list of the user names in "),e("b",null,"/etc/passwd"),l(" . "),e("br"),e("br"),l(),e("b",null,`ls -l | awk '{print "File name: "$9"\\tOwner: "$3"\\tModified date and time: "$6"\\t"$7"\\t"$8}'`),l(" customizes the "),e("b",null,"ls -l"),l(" command. From the long listing, it rearranges the ninth field to come first, labels each printed field, omits unwanted fields, and adds a tab between fields.")])]),e("tr",null,[e("td",null,[e("b",null,"sort")]),e("td",null,[l(" Sorts each line of text in a file or from a text stream alphabetically. Options include the following: "),e("ul",null,[e("li",null,[e("b",null,"-b"),l(" ignores leading blank spaces.")]),e("li",null,[e("b",null,"-d"),l(" uses the first alpha-numeric character and ignores special characters.")]),e("li",null,[e("b",null,"-f"),l(" ignores case.")]),e("li",null,[e("b",null,"-M"),l(" sorts by month.")]),e("li",null,[e("b",null,"-n"),l(" sorts according to the string numeric value.")]),e("li",null,[e("b",null,"-r"),l(" reverses the sort order.")])])]),e("td",null,[e("b",null,"ls | sort -r"),l(" reverses the sort order of files from the "),e("b",null,"ls"),l(" command. "),e("br"),e("br"),l(),e("b",null,"sort -b -d -f myfile"),l(" sorts each line in myfile and ignores leading spaces, character case, and special characters.")])]),e("tr",null,[e("td",null,[e("b",null,"split")]),e("td",null,[l(" Splits lines of text from a file or a text stream into segments of a specified number of lines. Options include: "),e("ul",null,[e("li",null,[e("b",null,[l("-l, - "),e("i",null,"number")]),l(" specifies the number of lines per file.")]),e("li",null,[e("b",null,"-b"),l(" splits text into a specified byte size instead of a number of lines.")]),e("li",null,[e("b",null,"-d"),l(" uses numeric suffixes rather than alphabetic.")]),e("li",null,[e("b",null,"-a"),l(" specifies the number of characters in the suffix.")])])]),e("td",null,[e("b",null,"split -50 -d -a 3 AllNames FiftyNames-"),l(" splits the AllNames file into individual files containing 50 lines each from the content of the AllNames file. The output is FiftyNames-001, FiftyNames-002, and so on.")])]),e("tr",null,[e("td",null,[e("b",null,"tr")]),e("td",null,[l(" Transposes characters in a text stream. "),e("b",null,"tr"),l(" only works with character streams. The command uses two character sets. "),e("ul",null,[e("li",null,"The first set specifies the characters to be changed."),e("li",null,"The second set specifies what they should be changed to.")]),e("p",null,"Options include the following:"),e("ul",null,[e("li",null,[e("b",null,"-c"),l(" changes all characters except those specified in the first set.")]),e("li",null,[e("b",null,"-d"),l(" deletes characters found in the first set.")]),e("li",null,[e("b",null,"-s"),l(" changes double characters to single ones.")]),e("li",null,[e("b",null,"-t"),l(" truncates the first set of characters to match the size of the second set.")])])]),e("td",null,[e("b",null,"cat myfile | tr a A"),l(" changes every lowercase a to an uppercase A in the output from myfile. "),e("br"),e("br"),l(),e("b",null,"cat myfile | tr abc lmn"),l(" changes each a to an l, each b to an m, and each c to an n in the output from myfile "),e("i",null,[l(". "),e("br")]),l(),e("br"),l(),e("b",null,"cat myfile | tr -d asdf"),l(" deletes each a, s, d, and f from the output of myfile. "),e("br"),e("br"),l(),e("b",null,"cat myfile | tr -c e f"),l(" changes every character in the output from my file to an f except for the letter e. "),e("br"),e("br"),l(),e("b",null,"cat myfile | tr -s t"),l(" changes double tt to a single t. "),e("br"),e("br"),l(),e("b",null,"cat myfile | tr -t abcde lmn"),l(" ignores the dd and the e in the first set and only changes a, b, and c. Without the "),e("b",null,"-t"),l(" option, every c, d, and e is changed to an n. "),e("div",null,[e("div",{class:"to-info-box"},[e("div",{class:"to-info-box-body"},[e("span",{class:"to-icon large","aria-hidden":"true"},[e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fal","data-icon":"circle-info",class:"svg-inline--fa fa-circle-info",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[e("path",{fill:"currentColor",d:"M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM208 352c-8.8 0-16 7.2-16 16s7.2 16 16 16l96 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0 0-112c0-8.8-7.2-16-16-16l-40 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l24 0 0 96-32 0zm48-168a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"})])]),e("div",{class:"to-info-box-body-content"},[e("span",null,[l(" Use "),e("b",null,"a-m"),l(" to specify all characters a through m.")])])])])])])]),e("tr",null,[e("td",null,[e("b",null,"printf")]),e("td",null," Creates formatted output by inserting arguments into user-defined strings of text."),e("td",null,[e("b",null,`printf "I'm \\"%s\\. It's nice to meet you." "Steve"`),l(` prints out "I'm Steve. It's nice to meet you."`)])]),e("tr",null,[e("td",null,[e("b",null,"unexpand")]),e("td",null,[l(" Changes spaces into a tab. Options include the following: "),e("ul",null,[e("li",null,[e("b",null,"-a"),l(" specifies that the command change all occurrences. Without "),e("b",null,"-a"),l(" , the command only changes leading spaces.")]),e("li",null,[e("b",null,"-t"),l(" specifies the number of spaces to be changed. The default is eight.")])])]),e("td",null,[e("b",null,"unexpand -a -t 3,4,5 myfile"),l(" changes each occurrence of three, four, or five consecutive spaces into a tab using text from myfile.")])]),e("tr",null,[e("td",null,[e("b",null,"uniq")]),e("td",null,[l(" Filters identical lines from a file. The lines must be adjacent. Options include the following: "),e("ul",null,[e("li",null,[e("b",null,"-d"),l(" prints only the duplicate lines.")]),e("li",null,[e("b",null,"-f"),l(" specifies the number of initial words to skip. Words are delimited by white space.")]),e("li",null,[e("b",null,"-s"),l(" specifies the number of initial characters to skip.")]),e("li",null,[e("b",null,"-w"),l(" specifies the number of characters to compare in each line.")]),e("li",null,[e("b",null,"-u"),l(" leaves out the duplicate lines.")])])]),e("td",null,[e("b",null,"uniq myfile"),l(" omits all repeated lines in myfile. It prints the first occurrence only. "),e("br"),e("br"),l(),e("b",null,"uniq -d myfile"),l(" prints only the repeated lines. "),e("br"),e("br"),l(),e("b",null,"uniq -u myfile"),l(" prints only the unique lines. "),e("br"),e("br"),l(),e("b",null,"uniq -f 4 myfile"),l(" skips the first four words when comparing lines. "),e("br"),e("br"),l(),e("b",null,"uniq -s 4 myfile"),l(" skips the first four characters when comparing lines. "),e("br"),e("br"),l(),e("b",null,"uniq -w 4 myfile"),l(" uses only the first four characters when comparing lines.")])]),e("tr",null,[e("td",null,[e("b",null,"wc")]),e("td",null,[l(" Prints the number of bytes, characters, lines, or words, or the length of the longest line from the text of a file or text stream. Options include the following: "),e("ul",null,[e("li",null,[e("b",null,"-c"),l(" specifies bytes.")]),e("li",null,[e("b",null,"-m"),l(" specifies characters. Character count is often identical to byte count.")]),e("li",null,[e("b",null,"-l"),l(" specifies line count.")]),e("li",null,[e("b",null,"-L"),l(" specifies the length of the longest line.")]),e("li",null,[e("b",null,"-w"),l(" specifies word count.")])]),e("div",null,[e("div",{class:"to-info-box"},[e("div",{class:"to-info-box-body"},[e("span",{class:"to-icon large","aria-hidden":"true"},[e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fal","data-icon":"circle-info",class:"svg-inline--fa fa-circle-info",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[e("path",{fill:"currentColor",d:"M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM208 352c-8.8 0-16 7.2-16 16s7.2 16 16 16l96 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0 0-112c0-8.8-7.2-16-16-16l-40 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l24 0 0 96-32 0zm48-168a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"})])]),e("div",{class:"to-info-box-body-content"},[e("span",null," When no options are used, the command prints line count, word count, and byte count, respectively.")])])])])]),e("td",null,[e("b",null,"wc myfile"),l(" displays line, word, and character count. "),e("br"),e("br"),l(),e("b",null,"wc -L myfile"),l(" displays the length of the longest line in the file. "),e("br"),e("br"),l(),e("b",null,"wc -m myfile"),l(" displays the number of characters in the file.")])])])],-1),e("h2",{id:"_2-13-2-process-text-streams",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2-13-2-process-text-streams"},[e("span",null,"2.13.2 Process Text Streams")])],-1)]))}const d=n(o,[["render",r],["__file","13.html.vue"]]),h=JSON.parse('{"path":"/02/13.html","title":"Section 2.13 Text Stream Processing","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"Section 2.13 Text Stream Processing","description":"some description"},"headers":[{"level":2,"title":"2.13.1 Text Stream Processing Facts","slug":"_2-13-1-text-stream-processing-facts","link":"#_2-13-1-text-stream-processing-facts","children":[{"level":3,"title":"Text Stream Processing Commands","slug":"text-stream-processing-commands","link":"#text-stream-processing-commands","children":[]}]},{"level":2,"title":"2.13.2 Process Text Streams","slug":"_2-13-2-process-text-streams","link":"#_2-13-2-process-text-streams","children":[]}],"git":{"updatedTime":1736404372000},"filePathRelative":"02/13.md"}');export{d as comp,h as data};
